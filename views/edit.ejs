<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Book - Track-A-Book</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="page-container">
        <h1>‚úèÔ∏è Edit Book</h1>
        
        <!-- Desktop Layout with Left/Right Containers -->
        <div class="edit-desktop-layout">
            <!-- Left Container - Book Information -->
            <div class="edit-left-container">
                <h2>üìñ Book Information</h2>
                <div class="book-info-readonly">
                    <div class="book-info-header">
                        <% if (book.cover_id) { %>
                            <img src="<%= book.cover_id %>" alt="Book cover" class="edit-book-cover">
                        <% } else { %>
                            <div class="edit-book-cover-placeholder">üìö<br>No Cover</div>
                        <% } %>
                        <div class="book-info-details">
                            <h3><%= book.title || 'Untitled' %></h3>
                            <p><strong>Authors:</strong> <%= book.author || 'Unknown' %></p>
                            <p><strong>Published:</strong> <%= book.published_at || 'Unknown' %></p>
                        </div>
                    </div>
                    <div class="book-info-meta">
                        <p><strong>ISBN-10:</strong> <%= book.isbn_10 || 'N/A' %></p>
                        <p><strong>ISBN-13:</strong> <%= book.isbn_13 || 'N/A' %></p>
                    </div>
                </div>
            </div>
            
            <!-- Right Container - Edit Form -->
            <div class="edit-right-container">
                <h2>üìù Edit Your Personal Notes & Rating</h2>
                <form action="/books/edit/<%= book.id %>" method="POST" class="edit-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rating">Your Rating (1-10):</label>
                            <input type="number" id="rating" name="rating" min="1" max="10" 
                                   value="<%= book.rating || '' %>" placeholder="Rate from 1 to 10">
                        </div>
                        
                        <div class="form-group">
                            <label for="date_read">Date You Read This:</label>
                            <input type="date" id="date_read" name="date_read" 
                                   value="<%= book.date_read ? book.date_read.toISOString().split('T')[0] : '' %>">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">Your Notes:</label>
                        <textarea id="notes" name="notes" rows="8" 
                                  placeholder="Write your thoughts, favorite quotes, or any notes about this book..."><%= book.notes || '' %></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üíæ Save Changes</button>
                        <a href="/books">
                            <button type="button" class="btn btn-secondary">‚Üê Back to My Books</button>
                        </a>
                    </div>
                </form>
                
                <div class="danger-zone">
                    <h3>‚ö†Ô∏è Danger Zone</h3>
                    <form action="/books/delete/<%= book.id %>" method="POST" 
                          onsubmit="return confirm('Are you sure you want to delete this book? This action cannot be undone!')">
                        <button type="submit" class="btn-danger">üóëÔ∏è Delete Book Permanently</button>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Mobile Layout -->
        <div class="edit-mobile-layout">
            <div class="mobile-book-info">
                <div class="mobile-book-header">
                    <% if (book.cover_id) { %>
                        <img src="<%= book.cover_id %>" alt="Book cover" class="mobile-book-cover">
                    <% } else { %>
                        <div class="mobile-book-cover-placeholder">üìö<br>No Cover</div>
                    <% } %>
                    <div class="mobile-book-details">
                        <h3><%= book.title || 'Untitled' %></h3>
                        <p><strong>By:</strong> <%= book.author || 'Unknown' %></p>
                        <p><strong>Published:</strong> <%= book.published_at || 'Unknown' %></p>
                    </div>
                </div>
            </div>
            
            <form action="/books/edit/<%= book.id %>" method="POST" class="mobile-edit-form">
                <div class="form-group">
                    <label for="mobile-rating">Your Rating (1-10):</label>
                    <input type="number" id="mobile-rating" name="rating" min="1" max="10" 
                           value="<%= book.rating || '' %>" placeholder="Rate from 1 to 10">
                </div>
                
                <div class="form-group">
                    <label for="mobile-date_read">Date You Read This:</label>
                    <input type="date" id="mobile-date_read" name="date_read" 
                           value="<%= book.date_read ? book.date_read.toISOString().split('T')[0] : '' %>">
                </div>
                
                <div class="form-group">
                    <label for="mobile-notes">Your Notes:</label>
                    <textarea id="mobile-notes" name="notes" rows="6" 
                              placeholder="Write your thoughts, favorite quotes, or any notes about this book..."><%= book.notes || '' %></textarea>
                </div>
                
                <div class="mobile-form-actions">
                    <button type="submit" class="btn btn-primary">üíæ Save Changes</button>
                    <a href="/books">
                        <button type="button" class="btn btn-secondary">‚Üê Back to My Books</button>
                    </a>
                </div>
            </form>
            
            <div class="mobile-danger-zone">
                <h3>‚ö†Ô∏è Delete Book</h3>
                <form action="/books/delete/<%= book.id %>" method="POST" 
                      onsubmit="return confirm('Are you sure you want to delete this book? This action cannot be undone!')">
                    <button type="submit" class="btn-danger mobile-delete-btn">üóëÔ∏è Delete Book Permanently</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>