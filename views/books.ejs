<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Books - BookNoteVault</title>
</head>
<body>
    <h1>📚 My Books Dashboard</h1>
    
    <% if (user) { %>
        <p>Welcome back, <strong><%= user.username %></strong>!</p>
        
        <form action="/auth/logout" method="POST" style="display: inline;">
            <button type="submit">Logout</button>
        </form>
    <% } %>
    
    <hr>
    
    <h2>📖 Your Books (<%= books.length %>)</h2>
    
    <a href="/books/new">
        <button>➕ Add New Book</button>
    </a>
    
    <hr>
    
    <% if (books.length === 0) { %>
        <p><em>No books added yet. Start by adding your first book!</em></p>
    <% } else { %>
        <% books.forEach(book => { %>
            <div style="border: 1px solid #ccc; margin: 10px 0; padding: 15px;">
                <h3>📖 <%= book.title || 'Untitled' %></h3>
                <p><strong>Authors:</strong> <%= book.author || 'Unknown' %></p>
                <p><strong>Published:</strong> <%= book.published_at || 'Unknown' %></p>
                
                <% if (book.cover_id) { %>
                    <img src="<%= book.cover_id %>" alt="Book cover" style="max-width: 100px; height: auto;">
                <% } %>
                
                <p><strong>Your Rating:</strong> <%= book.rating || 'Not rated' %>/10</p>
                <p><strong>Date Read:</strong> <%= book.date_read || 'Not set' %></p>
                <p><strong>Your Notes:</strong> <%= book.notes || 'No notes yet' %></p>
                
                <p><strong>ISBN-10:</strong> <%= book.isbn_10 || 'N/A' %></p>
                <p><strong>ISBN-13:</strong> <%= book.isbn_13 || 'N/A' %></p>
                
                <hr style="margin: 10px 0;">
                
                <a href="/books/edit/<%= book.id %>">
                    <button>✏️ Edit Notes/Rating</button>
                </a>
                
                <form action="/books/delete/<%= book.id %>" method="POST" style="display: inline;" 
                      onsubmit="return confirm('Are you sure you want to delete this book?')">
                    <button type="submit" style="background-color: #ff6b6b; color: white;">🗑️ Delete</button>
                </form>
            </div>
        <% }) %>
    <% } %>
    
    <hr>
    <p>
        <a href="/">
            <button>← Back to Home</button>
        </a>
    </p>
</body>
</html>